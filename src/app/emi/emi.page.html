<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      EMI Calculator
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-subtitle>Calculate the EMI</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>

      <form [formGroup]="emiForm" (ngSubmit)="calculateEmi()">
        <!-- Loan Amount -->
        <ion-item>
          <ion-label position="floating">Loan Amount* </ion-label>
          <ion-input type="number" inputmode="numeric" clearInput="true" formControlName="loanAmount"></ion-input>
        </ion-item>

        <!-- Rate of Interest -->
        <ion-item>
          <ion-label position="floating">Interest Rate* </ion-label>
          <ion-input type="number" inputmode="numeric" clearInput="true" required="true" formControlName="interest">
          </ion-input>
        </ion-item>

        <!-- No. of Year -->
        <ion-item>
          <ion-label position="floating">Loan Tenure* in Years </ion-label>
          <ion-input type="number" inputmode="numeric" clearInput="true" required="true" formControlName="tenure">
          </ion-input>
        </ion-item>

        <!-- Submit Button -->
        <ion-button [disabled]="emiForm.invalid" type="submit" color="primary" expand="full">Calculate</ion-button>
      </form>

    </ion-card-content>
  </ion-card>

  <ion-card id="breakup">
    <ion-card-header>
      <ion-card-subtitle>Your EMI Calculations</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <!-- EMI Calculator -->
      <ion-list>
        <ion-item>
          <ion-label>EMI: {{ emi }}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Total EMI: {{ totalEmi  }}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Interest: {{ this.totalInterest }}</ion-label>
        </ion-item>
      </ion-list>

    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-subtitle>
        Payment Breakup
      </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content class="schedule-content">

      <table mat-table [dataSource]="emiSchedule"  class="mat-elevation-z8"> 

        <!--- Note that these columns can be defined in any order.
              The actual rendered columns are set as a property on the row definition" -->

        <!-- Position Column -->
        <ng-container matColumnDef="principal">
          <th mat-header-cell *matHeaderCellDef> Principal </th>
          <td mat-cell *matCellDef="let element"> {{element.principal}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="interest">
          <th mat-header-cell *matHeaderCellDef> Interest </th>
          <td mat-cell *matCellDef="let element"> {{element.interest}} </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="emi">
          <th mat-header-cell *matHeaderCellDef> EMI </th>
          <td mat-cell *matCellDef="let element"> {{element.emi}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="endingBalance">
          <th mat-header-cell *matHeaderCellDef> Balance </th>
          <td mat-cell *matCellDef="let element"> {{element.endingBalance}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="percentagePaid">
          <th mat-header-cell *matHeaderCellDef> Amount Paid (%) </th>
          <td mat-cell *matCellDef="let element"> {{element.percentagePaid}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <!-- <ion-grid>
        <ion-row>
          <ion-col size="1">
            #
          </ion-col>
          <ion-col size="2">
            Principal
          </ion-col>
          <ion-col size="2">
            Interest
          </ion-col>
          <ion-col size="2">
            Total EMI
          </ion-col>
          <ion-col size="3">
            Balance
          </ion-col>
          <ion-col size="2">
            % Paid
          </ion-col>
        </ion-row>
        
        <ion-row *ngFor="let emi of emiSchedule; let i = index ">
          <ion-col size="1">
           <div> {{ i + 1 }} </div>
          </ion-col>
          <ion-col size="2">
            <div> <ion-text>{{ emi.principal }}</ion-text></div>
          </ion-col>
          <ion-col size="2">
            <div> <ion-text color="danger">{{ emi.interest }}</ion-text></div>
          </ion-col>
          <ion-col size="2">
            <div> <ion-text color="dark"> {{ emi.emi }} </ion-text></div>
          </ion-col>
          <ion-col size="3">
            <div> <ion-text color="success"> {{ emi.endingBalance }} </ion-text> </div>
          </ion-col>
          <ion-col size="2">
            <div><ion-text>{{ emi.percentagePaid }}</ion-text></div>
          </ion-col>
        </ion-row>
        
      </ion-grid> -->
    </ion-card-content>
  </ion-card>
</ion-content>